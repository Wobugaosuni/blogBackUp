---
title: javaScriptå®ç°å¤§æ•°ç›¸åŠ 
date: 2018-02-01 20:54:49
tags:
  - js
---

<br />

## è¶…å¤§çš„æ•°

çœ‹çœ‹æ­¤ä¾‹å­ğŸŒ°
```js
// ä¾‹å­ä¸€
9007199254740992 === 9007199254740993   // true

// ä¾‹å­äºŒ
21111111111111111111111111 === 21111111111111111111111000  // true
```
æŒ‰ç…§æ­£å¸¸é€»è¾‘ï¼Œä¾‹å­ä¸€å’ŒäºŒçš„è¾“å‡ºç»“æœåº”è¯¥æ˜¯ `false` çš„ï¼Œä½†æ§åˆ¶å°å´è¾“å‡º `true`

<!-- more -->

<br />
## ä¸ºä½•ä¸èƒ½ç›´æ¥ç›¸åŠ å‘¢

- å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œjsé‡‡ç”¨IEEE754æ ‡å‡†ä¸­çš„æµ®ç‚¹æ•°ç®—æ³•æ¥è¡¨è¿°æ•°å­—Number.
- ** jsåªèƒ½ç²¾ç¡®åˆ°ä¸ªä½çš„æœ€å¤§æ•´æ•°æ˜¯`Math.pow(2, 53); // 9007199254740992`ï¼ˆå°±æ˜¯2çš„53æ¬¡æ–¹, 16ä½æ•°ï¼‰ **
- å¯¹äºè¶…å‡º2çš„53æ¬¡æ–¹çš„æ•°å­—ï¼Œjsæ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿâ€”â€” **ä¸¢å¼ƒè¶…å‡º2çš„53æ¬¡æ–¹çš„æ•°å­—åçš„ä½æ•°ï¼Œå¯¼è‡´ç²¾åº¦ä¸¢å¤± **

<div style="width: 600px">
  {% asset_img big-number.png %}
</div>

<br />
## githubçš„å¼€æº

å®ç°å¤§æ•°ç›¸åŠ çš„åŠŸèƒ½ï¼Œå·²ç»æœ‰ä¸€äº›å¼€æºçš„åº“äº†
ä¸è¿‡åŸºäºæ±‚çŸ¥æ¬²(é¢è¯•å¯èƒ½å‡ºç°)ï¼Œè¿˜æ˜¯è‡ªå·±å®ç°ä¸‹å¥½
- [bignumber.js](https://github.com/MikeMcl/bignumber.js)

<br />
## å®ç°

>  æ€è·¯ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ŒæŒ‰å°æ—¶å€™çš„è®¡ç®—æ–¹å¼ï¼Œä»å³è¾¹å¾€å·¦è¾¹å¼€å§‹ç›¸åŠ 
  1. å°†å­—ç¬¦ä¸²æ‹†åˆ†æˆå•ä¸ªå…ƒç´ çš„æ•°ç»„ï¼ŒæŠŠå…ƒç´ é¢ å€’è¿‡æ¥
  2. ä»å‰å¾€åï¼ŒåŒä¸€indexçš„å…ƒç´ ç›¸åŠ ï¼Œè½¬æˆå­—ç¬¦ä¸²ï¼Œå†æ‹†åˆ†æˆæ•°ç»„
  3. å°†ç›¸åŠ çš„ç»“æœçš„æœ€åä¸€ä½æ”¾è¿›ç»“æœæ•°ç»„é‡Œ
  4. å¦‚æœè¿˜æœ‰å…ƒç´ (è¿›ä½)ï¼Œæ”¾åˆ°ä¸‹ä¸€è½®ç›¸åŠ 
  5. å¾ªç¯å®Œæˆäº†ã€‚ç»“æœéƒ½åœ¨æ•°ç»„é‡Œ
  6. åè½¬æ•°ç»„å…ƒç´ ï¼Œåˆå¹¶
  7. è¿˜è¦åŒ¹é…ç¬¬ä¸€ä½æ˜¯0çš„ï¼Œå»æ‰

<div style="width: 600px">
  {% asset_img example.jpeg %}
</div>

```js
function add(string1, string2) {
  // å®ç°è¯¥å‡½æ•°
  /**
   * æ–¹æ³•ä¸€ï¼Œä¸èƒ½å®ç°å¤§æ•°ç›¸åŠ 
   */
  // return (Number(string1) + Number(string2)).toString()

  /**
   * æ–¹æ³•äºŒï¼Œåªèƒ½é€‚åˆéè´Ÿæ•°ç›¸åŠ 
   */
  // å¤§æ•°ç›¸åŠ 
  let list1 = string1.split('').reverse()   // å°†å­—ç¬¦ä¸²æ‹†åˆ†æˆå•ä¸ªå…ƒç´ çš„æ•°ç»„ï¼ŒæŠŠå…ƒç´ é¢ å€’è¿‡æ¥
  let list2 = string2.split('').reverse()
  let resultList = []  // å­˜æ”¾ç›¸åŠ å¥½çš„ä¸ªä½æ•°çš„list
  let carry = 0  // è¿›ä½
  const cycleNumbers = Math.max.apply(Math, [string1.length, string2.length])  // ç›¸åŠ çš„æ¬¡æ•°

  let i = 0
  while (i <= cycleNumbers) {
    unitTotalList = (Number(list1.shift() || '0')  + Number(list2.shift() || '0') + carry).toString().split('')  // ä¸ªä½æ•°ç›¸åŠ 
    resultList.push(unitTotalList.pop());  // æŠŠç»“æœæ”¾è¿›listé‡Œ

    carry = Number(unitTotalList.pop() || '0')  // è¿›ä½çš„æ•°å­—ã€‚é»˜è®¤0
    // console.log('carry:', carry)

    i++
  }
  // console.log("resultList:", resultList);

  return resultList.reverse().join('').replace(/^0/gi, '')  // æŠŠlisté¢ å€’è¿‡æ¥ï¼Œåˆå¹¶ã€‚å¦‚æœæœ€å¤§çš„ä¸ªä½æ•°æ˜¯0ï¼Œä¸¢å¼ƒ

  /**
   * other
   */
}

module.exports = add
```

<br />
## æ–‡æ¡£å‚è€ƒ

- [jså®ç°å¤§æ•°ç›¸åŠ ](http://www.plqblog.com/views/article.php?id=29)
